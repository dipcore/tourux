!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tourux",[],e):"object"==typeof exports?exports.tourux=e():t.tourux=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},function(t,e,n){"use strict";t.exports=function(t){t=$(t);var e=t.offset(),n=t.outerHeight(),i=t.outerWidth();return{height:n,width:i,top:e.top,bottom:e.top+n,left:e.left,right:e.left+i}}},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);r(this,t),this.init()}n(3);var o=n(4),s=n(5),r=n(0),l=n(1),h=n(6),p=n(7),c=n(8);i.prototype.contentTemplate=void 0,i.prototype.stepNumber=0,i.prototype.helperElementPadding=10,i.prototype.helperLayerTransition=!1,i.prototype.contentPositionOffset=150,i.prototype.connectorSmoothness=.3,i.prototype.connectorLineWidth=2,i.prototype.connectorColor="#fff",i.prototype.steps=[],i.prototype.$element=void 0,i.prototype.$elements={},i.prototype.init=function(){var t=this;0!==this.steps.length&&(this.insertMainTemplate(),t.render(),$(window).on("resize",function(){return t.refresh()}))},i.prototype.render=function(){var t=this;if(this.steps[this.stepNumber]){var e=this.steps[this.stepNumber];this.$element&&this.$element.toggleClass("tourux-show-element",!1),this.$element=$(e.element),this.$element.toggleClass("tourux-show-element",!0),this.setHelperLayerPosition(),this.scrollToSelected(function(){t.setContent(),t.setContentPosition(),t.renderConnector()})}},i.prototype.refresh=function(){this.$element&&(this.setHelperLayerPosition(),this.setContentPosition(),this.renderConnector())},i.prototype.next=function(){this.stepNumber<this.steps.length-1?(this.stepNumber++,this.render()):this.end()},i.prototype.prev=function(){this.stepNumber>0&&(this.stepNumber--,this.render())},i.prototype.end=function(){$(window).off("resize"),this.removeMainTemplate()},i.prototype.insertMainTemplate=function(){var t=this,e=this;this.$elements.main=$(o),this.$elements.overlay=this.$elements.main.find(".tourux-overlay"),this.$elements.content=this.$elements.main.find(".tourux-content"),this.$elements.helper=this.$elements.main.find(".tourux-helper"),this.$elements.connector=this.$elements.main.find(".tourux-connector"),this.$elements.buttonClose=this.$elements.main.find(".tourux-button-close"),this.$elements.buttonClose.on("click",function(){t.end()}),$("body").append(this.$elements.main),setTimeout(function(){e.$elements.main.toggleClass("in",!0)},100)},i.prototype.removeMainTemplate=function(){var t=this;this.$elements.main.toggleClass("in",!1),setTimeout(function(){t.$elements.main.remove(),t.$elements={}},500)},i.prototype.initConnector=function(){this.connector=new c({element:this.$elements.connector[0],from:".tourux-box",to:".tourux-helper",smoothness:this.connectorSmoothness,padding:0,lineColor:this.connectorColor,lineWidth:this.connectorLineWidth})},i.prototype.setHelperLayerPosition=function(){var t=l(this.$element),e=this.helperElementPadding||0,n=t.width+e;n=n>$(window).width()?$(window).width():n;var i=t.height+e,o=t.top-e/2;o=o<0?0:o;var s=t.left-e/2;s=s<0?0:s,this.$elements.helper.css({width:n+"px",height:i+"px",top:o+"px",left:s+"px"})},i.prototype.scrollToSelected=function(t){var e=this,n=l(this.$element);n.bottom>window.scrollY+window.innerHeight||n.bottom<window.scrollY?(this.$elements.content.hide(),this.$elements.connector.hide(),h(this.$element,800,function(){e.$elements.content.show(),e.$elements.connector.show(),t()})):t&&t()},i.prototype.setContent=function(){var t=this;this.$elements.content.empty();var e=this.steps[this.stepNumber],n=this.contentTemplate||s,i=$(p(n,e));e.previousButton?i.find(".tourux-button-previous").on("click",function(){t.prev()}):i.find(".tourux-button-previous").remove(),e.nextButton?i.find(".tourux-button-next").on("click",function(){t.next()}):i.find(".tourux-button-next").remove(),this.$elements.content.html(i)},i.prototype.setContentPosition=function(){var t,e=this.contentPositionOffset,n=window.innerHeight,i=this.$elements.content.outerHeight(),o=l(this.$element),s=o.top-window.scrollY,r=n+window.scrollY-o.bottom;s>r?(t=o.top-i-e,t=t<window.scrollY?window.scrollY:t):(t=o.bottom+e,t=t+i>n+window.scrollY?n+window.scrollY-i:t),this.$elements.content.css({top:t})},i.prototype.renderConnector=function(){this.connector||this.initConnector(),this.connector.update()},t.exports=i},function(t,e){},function(t,e){t.exports="<div class=tourux>\r\n\r\n\t<button class=tourux-button-close>×</button>\r\n\r\n\t<div class=tourux-helper></div>\r\n\t\r\n\t<div class=tourux-content></div>\r\n\r\n\t<div class=tourux-connector></div>\r\n\r\n\t<div class=tourux-overlay></div>\r\n\t\r\n</div>"},function(t,e){t.exports='<div class=tourux-box>\r\n\t<div class=tourux-title>\r\n\t\t<h1>{{title}}</h1>\r\n\t</div>\r\n\t<div class=tourux-description>\r\n\t\t{{description}}\r\n\t</div>\r\n\t<div class=tourux-buttons>\r\n\t\t<button class="tourux-button tourux-button-previous">{{previousButton}}</button>\r\n\t\t<button class="tourux-button tourux-button-next">{{nextButton}}</button>\r\n\t</div>\r\n</div>\r\n'},function(t,e,n){"use strict";t.exports=function(t,e,n){$("html, body").animate({scrollTop:t.offset().top-20},{duration:e||800,complete:n})}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n,i=/{{([^%>]+)?}}/g;n=i.exec(t);)t=t.replace(n[0],e[n[1]]);return t}},function(t,e,n){"use strict";function i(t){if(!(this instanceof i))return new i(t);o(this,t),this.ns="http://www.w3.org/2000/svg",this.element||(this.element=document.createElement("connection-line")),this.svg=document.createElementNS(this.ns,"svg"),this.path=document.createElementNS(this.ns,"path"),this.path.style.stroke=this.lineColor,this.path.style.fill="transparent",this.path.style.strokeWidth=this.lineWidth,this.lineEndEl=document.createElement("div"),this.lineStartEl=document.createElement("div"),this.lineMiddleEl=document.createElement("div"),this.lineEndEl.className="connection-line-end",this.lineStartEl.className="connection-line-start",this.lineMiddleEl.className="connection-line-mark",this.lineEndEl.innerHTML=this.lineEnd,this.lineStartEl.innerHTML=this.lineStart,this.lineMiddleEl.innerHTML=this.lineMiddle,this.svg.appendChild(this.path),this.element.appendChild(this.svg),this.element.appendChild(this.lineEndEl),this.element.appendChild(this.lineStartEl),this.element.appendChild(this.lineMiddleEl),this.update()}var o=n(0),s=n(1),r=n(9);i.prototype.from=[0,0],i.prototype.to=[100,100],i.prototype.lineEnd="➤",i.prototype.lineStart="",i.prototype.lineMiddle="",i.prototype.lineWidth=1,i.prototype.lineColor="black",i.prototype.smoothness=1,i.prototype.padding=20,i.prototype.fromElementPadding=10,i.prototype.toElementPadding=10,i.prototype.fromDirection=void 0,i.prototype.toDirection=void 0,i.prototype.update=function(){function t(t){return t>0?1:t<0?-1:0}function e(t,e,n){var i=[0,0];switch(t){case"top":i[0]=e.left+e.width/2-n.left,i[1]=e.top-n.top;break;case"bottom":i[0]=e.left+e.width/2-n.left,i[1]=e.bottom-n.top;break;case"left":i[0]=e.left-n.left,i[1]=e.top+e.height/2-n.top;break;case"right":i[0]=e.right-n.left,i[1]=e.top+e.height/2-n.top}return i}function n(t){if(t instanceof Array)return r(t[0],t[1],t[2]||t[0],t[3]||t[1]);if("string"==typeof t){var e=t.split(/\s*,\s*/).length;if(2===e)return r(parseInt(e[0]),parseInt(e[1]))}return t?s(t):r()}function i(t,e){return{left:t.left-e,top:t.top-e,right:t.right+e,bottom:t.bottom+e,width:t.width+2*e,height:t.height+2*e}}if(this.element.parentNode){var o=n(this.from),l=n(this.to);o=i(o,this.fromElementPadding),l=i(l,this.toElementPadding);var h=r(Math.min(l.left,o.left)-this.padding,Math.min(l.top,o.top)-this.padding,Math.max(l.right,o.right)+this.padding,Math.max(l.bottom,o.bottom)+this.padding);this.svg.setAttribute("width",Math.max(h.width,this.lineWidth)),this.svg.setAttribute("height",Math.max(h.height,this.lineWidth));var p=r();this.element.offsetParent&&this.element.offsetParent!==document.body&&this.element.offsetParent!==document.documentElement&&(p=s(this.element.offsetParent)),this.element.style.top=h.top-p.top+"px",this.element.style.left=h.left-p.left+"px";var c=[o.left+o.width/2-h.left,o.top+o.height/2-h.top],u=[l.left+l.width/2-h.left,l.top+l.height/2-h.top],a=[u[0]-c[0],u[1]-c[1]],d=Math.atan2(-a[1],a[0]),m=Math.PI;d<0&&(d+=2*m);var f=this.fromDirection||(d<m/4?"right":d<3*m/4?"top":d<5*m/4?"left":d<7*m/4?"bottom":"right"),x=this.toDirection||(d<m/4?"left":d<3*m/4?"bottom":d<5*m/4?"right":d<7*m/4?"top":"left"),v=e(f,o,h),y=e(x,l,h),g=[(y[0]+v[0])/2,(y[1]+v[1])/2],b=[t(v[0]-c[0])*this.smoothness*500+v[0],t(v[1]-c[1])*this.smoothness*500+v[1]],w=[t(y[0]-u[0])*this.smoothness*500+y[0],t(y[1]-u[1])*this.smoothness*500+y[1]],E="M "+v[0]+" "+v[1]+" C "+b[0]+" "+b[1]+" "+w[0]+" "+w[1]+" "+y[0]+" "+y[1];this.path.setAttribute("d",E);var $=[this.lineEndEl.clientWidth,this.lineEndEl.clientHeight],M=[this.lineStartEl.clientWidth,this.lineStartEl.clientHeight],C=[this.lineMiddleEl.clientWidth,this.lineMiddleEl.clientHeight];this.lineEndEl.style.left=y[0]-$[0]/2+"px",this.lineEndEl.style.top=y[1]-$[1]/2+"px",this.lineStartEl.style.left=v[0]-M[0]/2+"px",this.lineStartEl.style.top=v[1]-M[1]/2+"px",this.lineMiddleEl.style.left=g[0]-C[0]/2+"px",this.lineMiddleEl.style.top=g[1]-C[1]/2+"px";var P=this.path.getTotalLength(),S=this.path.getPointAtLength(0),T=this.path.getPointAtLength(M[0]/2),L=this.path.getPointAtLength(P),N=this.path.getPointAtLength(P-$[0]/2),H=Math.atan2(T.y-S.y,T.x-S.x),W=Math.atan2(-N.y+L.y,-N.x+L.x);this.lineEndEl.style.transform="rotate("+W.toFixed(2)+"rad)",this.lineStartEl.style.transform="rotate("+H.toFixed(2)+"rad)"}},t.exports=i},function(t,e,n){"use strict";t.exports=function t(e,n,i,o){if(!(this instanceof t))return new t(e,n,i,o);this.left=e||0,this.top=n||0,this.right=i||0,this.bottom=o||0,this.width=Math.abs(this.right-this.left),this.height=Math.abs(this.bottom-this.top)}}])});